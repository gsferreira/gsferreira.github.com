
<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width" />
     <link rel="shortcut icon" href="/images/favicon.ico">
    <meta http-equiv="last-modified" content="2014-10-06T22:15:54.3961871+01:00" />
    <meta name="keywords" content="" />
	
    <link rel="alternate" type="application/rss+xml" title="RSS - Guilherme Ferreira Blog" href="/rss.xml" />
    <link rel="alternate" type="application/atom+xml" title="Atom - Guilherme Ferreira Blog" href="/feed.xml" />
	
    <title>
            Automate NuGet package creation using Grunt - 
        Guilherme Ferreira
    </title>
    <meta name="description" content="Guilherme Ferreira blog - Developer, Entrepreneur, Foodie, Addicted to coffee">
    <link rel="stylesheet" type="text/css" href="/stylesheets/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
    <link rel="canonical" href="http://gsferreira.com/archive/2014/08/automate-nuget-package-creation-using-grunt/" />
</head>
<body class="home blog">
    <div id="page" class="hfeed site">
        
	<header id="masthead" class="simple-header" role="banner">
	<hgroup>
		<a href="/" title="Home"><img width="40" height="40" src="http://www.gravatar.com/avatar/93c1c26212f9eb3673538e6ad6ca7eb4.png" title="logo"  alt="logo"></a>
		<h1 class="site-title"><a href="/" title="Snow Byte" rel="home">Guilherme Ferreira</a>
	</hgroup>
</header>
        

        <div id="main">
            <div id="primary" class="site-content">
                <div id="content" role="main">
                  


<div class="post">
    <h1>Automate NuGet package creation using Grunt</h1> 
      <div class="meta">
        <p class="posted">29 Aug 2014</p>
        <ul class="categories">
        </ul>
      </div>
    </div>
    
    
        
    <p>Probably you are already using Grunt, to automate the tasks to build your application or library. In  <a href="https://github.com/TalksLab/metro-bootstrap">metro-bootstrap</a> we are using Grunt to automate the build process, but until now there's a last step that we are doing manually: <strong>create the NuGet package</strong> for new releases, until today.</p>

<p>How we automate the package build?</p>

<!--excerpt-->

<p>It's simpler than it seems.</p>

<h3>1. Install nuget</h3>

<p>First make sure that you have nuget.exe in your machine. </p>

<p><strong>Is NuGet.exe in your PATH?</strong></p>

<ol>
<li>Open a command prompt.</li>
<li><p>Type <em>nuget</em> and hit enter.</p>

<p>2.1. If the nuget help documentation is displayed, then nuget.exe is already in your PATH.</p>

<p>2.2. If you received the message, "'nuget' is not recognized as an internal or external command, operable program or batch file." then nuget.exe is not in your PATH.</p></li>
</ol>

<p><strong>How to add NuGet.exe to your PATH?</strong></p>

<ol>
<li>Open a command prompt.</li>
<li>Enter the following command: <em>set PATH=%PATH%;C:\nuget</em> where "c:\nuget" is the path to the nuget.exe (<a href="http://docs.nuget.org/docs/start-here/installing-nuget#Installing_a_CI_build">available here</a>).</li>
</ol>

<h3>2. Create the NuGet definition file</h3>

<p>Create the following XML file with the definition for the package with the <em>".nuspec"</em> extension.</p>

<pre><code>&lt;?xml version="1.0"?&gt;
&lt;package xmlns="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd"&gt;
    &lt;metadata&gt;
        &lt;!--
        ID used to identify the nuget package
        --&gt;
        &lt;id&gt;metro-bootstrap&lt;/id&gt;

        &lt;!--
        Package version - leave this blank
        --&gt;
        &lt;version&gt;0.0.0&lt;/version&gt;

        &lt;!-- Author, Owner and Licensing details --&gt;
        &lt;authors&gt;TalksLab&lt;/authors&gt;
        &lt;owners&gt;TalksLab&lt;/owners&gt;
        &lt;requireLicenseAcceptance&gt;false&lt;/requireLicenseAcceptance&gt;
        &lt;copyright&gt;Copyright 2014&lt;/copyright&gt;

        &lt;!-- General Information --&gt;
        &lt;description&gt;metro-bootstrap: Twitter Bootstrap with Metro style&lt;/description&gt;
        &lt;releaseNotes&gt;-&lt;/releaseNotes&gt;
        &lt;tags&gt;twitter bootstrap css metro responsive html5 talkslab&lt;/tags&gt;

        &lt;!-- 
        Packages (incl. minimum version) on which this package
        depends 
        --&gt;
        &lt;dependencies&gt;
          &lt;dependency id="Twitter.Bootstrap.Less" version="3.2.0.1" /&gt;
        &lt;/dependencies&gt;
    &lt;/metadata&gt;
    &lt;files&gt;
        &lt;file src="app\less\*" target="content\Content\metro-bootstrap" /&gt;
        &lt;file src="dist\css\metro-bootstrap.css" target="content\Content" /&gt;
        &lt;file src="dist\css\metro-bootstrap.min.css" target="content\Content" /&gt;
    &lt;/files&gt;
&lt;/package&gt;
</code></pre>

<p>Define in the files element the files to copy to the package.
If you want to test the nuspec file, just type the following command in the command line (where mypackage.nuspec is the name of the nuspec file).</p>

<pre><code>nuget pack mypackage.nuspec
</code></pre>

<h3>3. Create grunt task to build the NuGet package</h3>

<p>In order to create the file, go to the grunt script and add the following task (just rename the definition file name):</p>

<pre><code>grunt.registerTask('nuget', 'Create a nuget package', function() {
    var done = this.async();
    //invoke nuget.exe
    grunt.util.spawn({
        cmd: "nuget.exe",
        args: [
            //definition file
            "pack",
            "metro-bootstrap.nuspec",

            //path where the package should be created
            "-OutputDirectory",
            "nuget",

            //override the version using the version in package.json
            "-Version",
            grunt.config.get("pkg").version
        ]
    }, function (error, result) {
        if (error) {
            grunt.log.error(error);
        } else {
            grunt.log.write(result);
        }
        done();
    });
  });
</code></pre>

<p>Now, just open the command line and run the <em>"grunt nuget"</em> command, and a nuget package will be created.</p>

<p>The configuration used in this post is running on <a href="https://github.com/TalksLab/metro-bootstrap">metro-bootstrap</a> library. Fill free to fork it and try.</p>

<p>I hope this helps you.</p>



	<div class="post-social-links">
        <a href="http://twitter.com/gsferreira"><img src="/images/000-twitter-bird-48.png" title="gsferreira"/></a>
        <a href="http://gsferreira.com/rss.xml"><img src="/images/000-rss-feeds-48.png" title="gsferreira.com feed" onClick="_gaq.push(['_trackEvent', 'Post', 'RssSubscribe', 'Rss Subscribe on Post']);"/></a>
    </div>
	<div class="addthis_toolbox addthis_default_style" style="float:right;">
        <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
        <a class="addthis_button_tweet"></a>
        <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
        <a class="addthis_button_linkedin_counter"></a>
        <a class="addthis_counter addthis_pill_style"></a>
    </div>
	
    <div id="disqus_thread"></div>
<script>
    var reset_disqus = function(){
        DISQUS.reset({
            reload: true,
            config: function () {
                //this.page.identifier = '';
                this.page.url = 'http://gsferreira.com/archive/2014/08/automate-nuget-package-creation-using-grunt/';
                //this.page.title = '';
            }
        });
    };

    var disqus_shortname = 'gsferreira';
    var disqus_url = 'http://gsferreira.com/archive/2014/08/automate-nuget-package-creation-using-grunt/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    window.addEventListener('orientationchange', reset_disqus);
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-****"></script>


                </div>
                <!-- #content -->
            </div>
            <!-- #primary .site-content -->
        </div>
        <!-- #main -->

        <footer class="site-footer" role="contentinfo">
            <div class="site-info">
                Powered by <a href="https://github.com/Sandra/Sandra.Snow" rel="generator">Sandra.Snow</a> using <a href="https://github.com/gsferreira/letsnow" rel="generator">letsnow theme</a>.	
            </div>
            <!-- .site-info -->
        </footer>
        <!-- #colophon .site-footer -->
    </div>
    <!-- #page .hfeed .site -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src='/javascripts/prettify.js' type='text/javascript'></script>
    
    <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-33436813-1']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>
    
    <script type='text/javascript'>
      $(function () {
        $("pre code").parent().each(function () {
          if (!$(this).hasClass("prettyprint")) {
            $(this).addClass("prettyprint");
            a = true
          }
        });

        prettyPrint();
      });
    </script>
</body>
</html>
